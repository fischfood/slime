/**
 * 00. Global Header
 * 01. Top bar
 * 02. Primary Menu
 * 03. Utility
 * 04. Mobile
 */

// 00. Global Header
#main-menu {
	background-color: $white;
	z-index: 1060;

	> div {
		position: relative;
	}

	&:before {
		content: '';
		height: 2px;
		width: 100%;
		position: absolute;
		top: 49%;
		top: calc(50% - 1px);
		background: $topbar-item-hover;
		transition: all $global-timing;
	}

	body.header-scrolled &, body.interior &  {
		&:before {
			top: 0;
			height: 100%;
			background: $primary-color;
			box-shadow: 0px 0px 10px rgba( $black ,.3);
		}
	}

}

@media #{$desktop-up} {

	#main-menu {

		.header-fixed &, .header-clicked & {
			position: fixed;
			width: 100%;
			top: 0;
		}

		.with-utility & {
			top: $utility-item-height;
		}

		.admin-bar.header-clicked & {
			margin-top: 32px;
		}
	}

	.header-spacer {
		.header-fixed &, .header-clicked & {
			display: block;
			padding-top: $topbar-item-height;
		}

		.with-utility & {
			padding-top: $topbar-item-height + $utility-item-height;
		}
	}

	.admin-bar.header-fixed {
		#main-menu, #utility {
			margin-top: 32px;
		}
	}
}

// 01. Top bar
#main-menu .top-bar {
	@include breakpoint(medium up) {
		padding: 0;

		> div > ul {
			padding: $topbar-padding-medium;
			text-align: center;
			justify-content: space-evenly;
		}
	}

	.top-bar-title,
	.top-bar-left,
	.top-bar-right {
		height: $topbar-item-height;
		line-height: $topbar-item-height;
		width: auto;
		margin: 0;
		text-align: center;
		transition: height $global-timing, line-height $global-timing;

		> ul > li {
			line-height: $topbar-item-height;
			padding: 0;
			vertical-align: middle;
			display: inline-block;
			transition: line-height $global-timing;
			
			> a {
				display: inline-block;
				color: $black;
				//font-size: 1.125rem;
				font-weight: $fw-bold;
				//background: $white;
				transition: all $global-timing;
				text-transform: uppercase;
				padding: .3125rem .625rem;
				letter-spacing: 1px;
				position: relative;
				z-index: 10;

				&:before {
					content: "";
					height: 100%;
					width: 100%;
					background: $white;
					top: 0;
					left: 0;
					opacity: 1;
					position: absolute;
					z-index: -1;
					transition: all $global-timing;
				}
			}

			// &.active > a,
			> a:hover {
				color: $white;

				&:before {
					background-color: $topbar-item-hover;
					opacity: 1 !important;
					height: 100%;
				}
			}
		}

		body.header-scrolled &, body.interior & {
			height: $topbar-item-scrolled-height;
			line-height: $topbar-item-scrolled-height;

			> ul > li {
				line-height: $topbar-item-scrolled-height;

				> a {
					&:before {
						opacity: 0;
					}
				}
			}
		}
	}

	.top-bar-left, .top-bar-right {
		width: 45%;
		width: calc( 50% - 60px );

		body.style-2023 & {
			width: calc( 50% - 70px ); // -60px
		}
	}

	.top-bar-title {
		width: 10%;
		width: calc(120px);
		padding: 0;

		body.style-2023 & {
			width: calc(140px);
		}

		a {
			display: block;
			height: $topbar-item-height;
			text-align: center;
			transition: height $global-timing;

			.logo-bg {
				display: inline-block;
				height: $topbar-item-height; //100%;
				position: relative;
				transition: height $global-timing;

				&:before {
					content: "";
					height: $topbar-item-height;
					width: 100%;
					position: absolute;
					top: 0;
					left: 0;
					background: $white;
					transition: all $global-timing;

				}
			}

			img {
				height: $topbar-item-height;
				display: inline-block;
				padding: 1.5rem .5rem;
				position: relative;
				&.logo {
					transition: all $global-timing;
				}

				body.style-2023 & {
					padding: .5rem; //1.5rem .5rem;
				}
			}

			.alt-logo-container {
				height: 100%;
				width: 100%;
				position: absolute;
				top: 0;
				left: 0;
				transition: all $global-timing;

				.alt-logo {
					display: block;
					position: relative;
					height: 0%;
					width: 0%;
					top: 50%;
					left: 50%;
					transform: translate(-50%,-50%);

					border-radius: 100%;
					background-color: $topbar-item-hover;
					background-position: center center;
					background-size: $topbar-item-height - 1rem;
					background-repeat: no-repeat;

					transition: all $global-timing;

					body.style-2023 & {
						background-color: $primary-color;
					}
				}
			}

			body.header-scrolled &, body.interior & {
				height: $topbar-item-scrolled-height;

				.logo-bg {
					height: $topbar-item-scrolled-height;
					&:before {
						width: 0;
						left: 50%;
						height: $topbar-item-scrolled-height;
					}
				}

				img {
					height: $topbar-item-scrolled-height;
					padding: .5rem;
				}

				.alt-logo-container {

					.alt-logo {
						height: $topbar-item-scrolled-height + 1rem;
						width: $topbar-item-scrolled-height + 1rem;
						background-size: $topbar-item-scrolled-height - 1rem;
						box-shadow: 0px 0px .75rem $topbar-item-hover;
					}
				}
			}

			body.header-scrolled.style-2023 &, body.interior.style-2023 & {
				.alt-logo-container .alt-logo {
					height: $topbar-item-scrolled-height;
					width: $topbar-item-scrolled-height;
					background-size: $topbar-item-scrolled-height - .75rem;
					box-shadow: none !important;
				}
			}
		}
	}
}


// 02. Primary Menu
#primary-menu {
	height: $primary-menu-height;
	line-height: $primary-menu-line-height;
	position: static;

	.menu-item {
		height: inherit;
		line-height: inherit;

		a {
			height: inherit;
			line-height: inherit;
			padding-top: 0;
			padding-bottom: 0;
			color: $primary-color;

			&:hover {
				color: $secondary-color;
			}
		}

		&.as-button {
			a {
				height: $topbar-item-height - 3rem;
				line-height: $topbar-item-height - 3rem;
				margin: 1.5rem 1rem;

				background-color: $secondary-color;
				border-radius: 100px;
				color: $white;
				transition: all $global-timing ease-out;

				&:hover {
					background-color: $primary-color;
				}
			}
		}

		&.active {
			a {
				background: transparent !important;
			}
		}
	}

	.has-dropdown {
		position: relative;

		//&:before {
		//	content: '';
		//
		//	border: {
		//		left: 6px solid transparent;
		//		right: 6px solid transparent;
		//		bottom: 6px solid $secondary-color;
		//	};
		//	display: none;
		//	height: 0;
		//	margin-left: -6px;
		//	width: 0;
		//
		//	position: absolute;
		//	bottom: 0;
		//	left: 50%;
		//}


	}

	.sub-menu {
		background: $primary-submenu-bg-color;
		border-top: .25rem solid $secondary-color;
		display: none;
		list-style: none;
		margin: 0;
		//max-width: 350px;
		//min-width: 100px;
		width: 250px;
		padding: .5rem;
		text-align: right;

		position: absolute;
		right: 0;
		top: 100%;


		.menu-item {
			height: auto;
			line-height: 1rem;
		}

		a {
			display: block;
			padding: .5rem;
			color: $primary-submenu-link-color
		}

		.sub-menu {
			right: auto;
			left: 100%;
			top: -.75rem;
		}
	}

	> li > .sub-menu {
		padding: 1rem;
	}

	.mega, .mega-menu {
		position: static;

		> .sub-menu {
			padding: 1rem;
			right: 0;
			text-align: left;
			margin: 0;
			width: auto;
			background: $primary-color;
			border-top: 4px solid $secondary-color;

			> li {
				display: inline-block;
				vertical-align: top;
				padding: 0 1rem;

				&:before { // Hides Arrow
					display: none !important;
					border: none !important;
				}

				a {
					padding: .5rem 0;
					font-size: .875rem;
				}

				> a {
					font-size: 1.125rem;
					span.description {
						color: $white;
						display: block;
						font-size: .875rem;
						font-weight: normal;
						margin-top: .25rem;
					}
					&:hover {
						color: $secondary-color;
					}
				}

				> ul {
					margin-top: .5rem;
					border-top: 1px solid rgba($secondary-color, .75);
					padding: .5rem 0;
					width: 90%;
				}
			}

			li[class*="menu-icon-"], li[class*=" menu-icon"] {
				> a:before {
					@include icon-font();
					margin-right: .5rem;
					display: inline-block;
					color: $secondary-color;
					position: relative;
					top: .25rem;
					font-size: 1.5rem;
				}

				.description {
					margin-top: .5rem;
				}
			}

			.sub-menu {
				display: block;
				position: static;
				text-align: left;
				background: none;

				a {
					color: $secondary-color;

					span.description {
						color: $white;
						display: block;
						font-weight: normal;
						margin-top: .25rem;
					}

					&:hover {
						color: $white;
					}
				}
			}

			a {
				color: $white;
			}
		}
	}

	/* Traditional Menu Hover Styles */
	&.is-traditional-menu {
		.has-dropdown {
			&:hover {
				&:before {
					display: block;
				}

				> .sub-menu {
					display: block;
				}
			}
		}
	}

	/* Mega Menu Click Styles */

	&.is-mega-menu {
		> li > .dropdown {
			position: absolute;
			opacity: 0;
			display: block;

			> li {
				display: block;
			}
		}

		> .menu-item-has-children > .dropdown>li > a,
		> li.stacked > .dropdown li:first-of-type a {
			padding-top: 6px;
		}

		.dropdown {

			z-index: -100;
			top: -1000vh;

			transition: $global-timing all $global-easing, $global-timing * .5 z-index, 0s top;

			will-change: transform, opacity, z-index;

			> li,
			> li > a {
				text-align: left;
				height: auto;
				line-height: 1rem;
				vertical-align: top;

				@media screen and ( min-width: 1190px ) {
					font-size: 1rem;
				}
			}
		}

		.mega {
			> .dropdown {
				right: auto;
				font-size: 0;
				> li {
					display: inline-block;
				}
			}

			.dropdown {
				> li,
				> li > a {
					text-align: left;
				}
			}

			&.full {
				> ul {
					width: 100%;
					left: 0;
					right: auto;
					padding: 0;

					> li {
						padding: 1rem;
					}

					.menu-item-type-yawp_wim {
						padding: 0;

						&:after {
							content: "";
							position: absolute;
							top: 0;
							background: $white;
							width: inherit;
							height: 100%;
						}

						.yawp_wim_wrap {
							position: relative;
							z-index: 2;
							overflow: hidden;
							padding: 1rem;

							&:before {
								content: "";
								height: 90%;
								width: 400px;
								position: absolute;
								left: 40%;
								top: 0;
								background-image: url("");
								background-repeat: no-repeat;
								opacity: .35;
								background-size: contain;
							}
						}
					}

					> li:last-of-type {
						&.menu-item-type-yawp_wim {
							.yawp_wim_wrap {
								overflow: visible;
							}
						}
					}
				}
			}
		}

		.menu-item-has-children {

			> a {
				position: relative;
			}

			&.menu-item-has-children-open {
				> a {
					position: relative;
					color: $secondary-color;

					&:before {
						opacity: 1;
					}
				}

				.dropdown {
					opacity: 0;
					z-index: 1090;
					top: 100%;

					transform: translateY(0);
				}

				&.mihco-visible {
					.dropdown {
						opacity: 1;
						top: 100%;
					}
				}
			}
		}

		.widget-area {
			margin: 0 !important;
			padding: 0 !important;
		}

		.mega-menu-widget {
			margin-bottom: 0;
			.mega-widget-text {
				padding: 1rem 2rem;
				font-size: 1rem;
				text-align: left;
				font-weight: normal;
				color: $white;
			}
			img {
				padding-bottom: 1rem;
			}
			a {
				line-height: 1;
				font-size: 1rem;
				font-weight: normal;
				text-decoration: underline;
				&.color-white {
					color: $white !important;
				}

				&:hover {
					opacity: .75;
				}
			}
		}
	}
}

.mega-menu-bg {
	background: $primary-color;
	height: 0px;
	position: absolute;
	top: 100%;
	z-index: -10;
	width: 0px;
	left: 0;
	border-top: 4px solid $secondary-color;
	transition: 0.25s opacity;
	opacity: 0;

	.mega-arrow {
		border-style: solid;
		border-width: 0 20px 0 20px;
		border-color: transparent transparent $secondary-color transparent;
		background: none;
		bottom: 100%;
		position: absolute;
		left: 80px;
		transition: all .25s;
	}

	.mega-widget-bg {
		position: absolute;
		right: 0;
		top: 0;
		bottom: 0;
		width: 0;
		transition: background .25s;
	}

	&.mega-menu-open {
		z-index: 1085;
	}

	&.mega-menu-visible {
		opacity: 1;
		transition: 0.25s all;

		.mega-arrow {
			border-width: 20px;
		}
	}

	&:before, &:after {
		content: "";
		height: 100%;
		width: 0;
		display: block;
		background: $primary-color;
		position: absolute;
		top: 0px;
		border-top: 4px solid $secondary-color;
		margin-top: -4px;
		box-sizing: content-box;
		transition: width .3s;
	}

	&:before {
		right: 100%;
	}

	&:after {
		left: 100%;
	}

	&.mega-menu-full {
		&:before, &:after {
			width: 50vw;
			width: calc( ( 100vw - 1200px) / 2 );
		}
	}

	&:not(.mega-menu-open):not(.mega-menu-visible) {
		height: 0 !important;
	}
}

body.mega-open {
	.mega-overlay {
		height: 100vh;
		width: 100vw;
		position: fixed;
		top: 0;
		left: 0;
		background: rgba(0,0,0,.1);
		z-index: 600;
	}
}

// 03. Utility

.utility-menu-container {
	overflow: auto;
	background: $white;
	position: relative;
	z-index: 1065;

	.with-utility & {
		position: fixed;
		width: 100%;
		top: 0;
	}

	.utility-menu {
		float: right;
		li {
			margin-bottom: 0;
			a {
				padding: 0 1rem;
				height: $utility-item-height;
				line-height: $utility-item-height + .25rem;
				font-size: .875rem;
				font-weight: 400;
				color: $primary-color;

				&:focus, &:active {
					color: $primary-color;
				}

				&:hover {
					color: $secondary-color;
				}

			}
		}
	}
}


// 04. Mobile
.top-bar.mobile-header {
	border-bottom: 2px solid $dark-gray;
	padding: .5rem 1rem;

	.top-bar-title {
		img {
			max-height: 46px;
			max-width: 100%;
		}

		body.style-2023 & {
			margin: 0;
			img {
				max-height: 66px;
			}
		}
	}

	.top-bar-right {
		max-width: 50%;
		text-align: right;
	}

	a.menu-icon{
		width: 30px;
		height: 25px;

		&:after {
			background: $secondary-color;
			height: 4px;
			box-shadow: 0 10px 0 $secondary-color, 0 20px 0 $secondary-color;
		}
	}
}

.off-canvas {
	height: 100%;
	background: $secondary-color;

	* {
		&:focus,
		&:active {
			outline: none;
		}
	}

	.off-canvas-list {
		list-style: none;
		margin: 0;
		padding: 1rem;
	}

	.button {
		display: block;
		-webkit-font-smoothing: antialiased;

		a {
			color: inherit;
		}
	}

	a {
		color: white;
		display: block;
		font-size: 1.25rem;
		line-height: 1.1;
		padding: .5rem 0;
		font-weight: bold;
	}

	.utility-item {
		border-top: 2px solid white;
		margin-top: 1.5rem;
		padding-top: 1.5rem;

		~ .utility-item {
			border-top: none;
			margin-top: 0;
			padding-top: 0;
		}
	}

	.dropdown {
		list-style: none;
		margin: 0;
		padding: 0 1.25rem;
	}

	.is-drilldown {
		height: 100% !important;

		a, .is-drilldown-submenu {
			background: $secondary-color;
		}

		.is-drilldown-submenu-parent {
			> a:after {
				border-color: transparent transparent transparent $primary-color;
				right: .75rem;
			}
		}

		.js-drilldown-back {
			padding: 1rem 0;
			> a:before {
				border-color: transparent $primary-color transparent transparent;
			}
		}

		.drilldown {
			padding: .5rem 0;

			li {
				a {
					padding: .5rem 1.5rem .5rem 1rem;
				}
			}
		}

		.dropdown {
			padding: 0;
		}
	}

	span.description {
		color: $white;
		display: block;
		font-size: .875rem;
		font-weight: normal;
		margin-top: .25rem;
	}

	li[class*="menu-icon-"], li[class*=" menu-icon"] {
		> a:before {
			@include icon-font();
			margin-right: .5rem;
			display: inline-block;
			color: $primary-color;
			position: relative;
			top: .25rem;
			font-size: 1.5rem;
		}

		.description {
			margin-top: .5rem;
		}
	}
}